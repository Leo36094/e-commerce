(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-797ac3b2"],{1799:function(t,a,o){"use strict";var n=function(){var t=this,a=t.$createElement,o=t._self._c||a;return o("div",{staticClass:"block"},[o("el-pagination",{attrs:{"page-size":10,layout:"total, prev, pager, next","page-count":t.fullValue.total_pages},on:{"current-change":t.changePage},model:{value:t.fullValue,callback:function(a){t.fullValue=a},expression:"fullValue"}})],1)},e=[],i=(o("cadf"),o("551c"),o("097d"),o("2f62"),{components:{},props:{value:{type:Object,default:function(){return{}}},changePage:{type:Function,default:function(){return""}}},data:function(){return{}},computed:{fullValue:{get:function(){return this.value},set:function(t){this.$emit("input",t)}}},watch:{},created:function(){},mounted:function(){},destroyed:function(){},methods:{handleCurrentChange:function(t){this.$emit("pagination:onChangePage",t)}}}),s=i,c=o("2877"),r=Object(c["a"])(s,n,e,!1,null,null,null);r.options.__file="Pagination.vue";a["a"]=r.exports},"1fc3":function(t,a,o){},"3d4b":function(t,a,o){"use strict";var n=o("91f1"),e=o.n(n);e.a},"729c":function(t,a,o){"use strict";o.r(a);var n=function(){var t=this,a=t.$createElement,o=t._self._c||a;return o("div",{staticClass:"customer-order"},[o("Loading",{attrs:{active:t.isLoading},on:{"update:active":function(a){t.isLoading=a}}}),t.isNonEmptyArray(t.products)?[o("div",{staticClass:"customer-order-cart",on:{click:t.openCart}},[o("i",{staticClass:"fas fa-lg fa-cart-plus"}),o("div",{staticClass:"customer-order-cart__num",model:{value:t.cartQty,callback:function(a){t.cartQty=a},expression:"cartQty"}},[t._v(t._s(t.handleCartQty))])]),o("div",{staticClass:"customer-order-content"},[o("div",{staticClass:"customer-order-content__card"},[o("Card",{model:{value:t.products,callback:function(a){t.products=a},expression:"products"}})],1)]),o("Pagination",{staticClass:"customer-order__pagination",attrs:{changePage:t.changePage},model:{value:t.pagination,callback:function(a){t.pagination=a},expression:"pagination"}})]:t._e()],2)},e=[],i=o("cebc"),s=(o("cadf"),o("551c"),o("097d"),o("2f62")),c=function(){var t=this,a=t.$createElement,o=t._self._c||a;return o("div",{staticClass:"card-container"},[o("Loading",{attrs:{active:t.isLoading},on:{"update:active":function(a){t.isLoading=a}}}),t._l(t.fullValue,function(a,n){return o("el-card",{key:a.id,staticClass:"card",attrs:{shadow:"hover","body-style":{padding:"0px"}}},[o("div",{staticClass:"card__background",style:{backgroundImage:"url("+a.imageUrl+")"}}),o("div",{staticClass:"card-info"},[o("div",{staticClass:"form__row card-info__item"},[o("span",[t._v(t._s(a.title))]),o("el-tag",{attrs:{size:"medium",type:"info"}},[t._v(t._s(a.category))])],1),o("div",{staticClass:"form__row card-info__item"},[o("p",[t._v(t._s(a.description))])]),o("div",{staticClass:"form__row card-info__item"},[o("h4",{staticClass:"card-info__item__original-price"},[t._v("原價：$"+t._s(1.8*parseInt(a.price)))]),o("span",[t._v("售價： $"+t._s(a.price))])]),o("div",{staticClass:"form__row"},[o("Button",{staticClass:"card-info__btn",attrs:{btnName:"了解更多"},nativeOn:{click:function(o){t.openModal(a.id)}}}),o("Button",{staticClass:"card-info__btn",attrs:{colorType:"special",btnName:"加入購物車"},nativeOn:{click:function(o){t.addToCart(a.id,a.num)}}})],1)])])})],2)},r=[],u=o("3398"),d=o("e01c"),l=o("4329"),f=o("d49f"),p="".concat("https://vue-course-api.hexschool.io/","api/").concat("leochuang","/product/"),h="".concat("https://vue-course-api.hexschool.io/","api/leochuang/cart"),g={components:{Button:u["a"],Select:d["a"],TextArea:f["a"],Label:l["a"]},props:{value:{type:Array,default:[]}},data:function(){return{showModal:!1,product:{},cartLength:"",isLoading:!1}},computed:{fullValue:{get:function(){return this.value},set:function(t){this.$emit("input",t)}}},watch:{},created:function(){},mounted:function(){},methods:Object(i["a"])({},Object(s["b"])(["setModalData","setModal"]),{openModal:function(t){var a=this;this.showModal=!0,this.isLoading=!0,this.$http.get("".concat(p).concat(t)).then(function(t){if(t.data.success){var o=t.data.product;a.product=a.deepCopy(o),a.setModalData(a.product),a.setModal("CardModal"),a.isLoading=!1}else alert("請先登入，以利取得資料"),a.$router.push({name:"login"}),a.isLoading=!1})},addToCart:function(t){var a=this,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;this.isLoading=!0,this.$http.post(h,{data:{product_id:t,qty:o}}).then(function(t){a.showModal=!1,a.$root.$emit("Card:refresh"),a.isLoading=!1,a.notifySuccess("成功加入購物車")})},notifySuccess:function(t){this.$message({showClose:!0,message:t,type:"success"})}})},v=g,_=(o("3d4b"),o("2877")),m=Object(_["a"])(v,c,r,!1,null,null,null);m.options.__file="Card.vue";var C=m.exports,y=o("87fb"),$=o("1799"),b="https://vue-course-api.hexschool.io/api/leochuang/cart",w="".concat("https://vue-course-api.hexschool.io/","api/").concat("leochuang","/admin/products"),L={components:{Card:C,Pagination:$["a"],CartModal:y["a"]},data:function(){return{products:[],pagination:{},cartQty:"",isLoading:!1}},computed:{handleCartQty:function(){return this.cartQty>9?"9+":this.cartQty}},watch:{cartQty:function(t){t?this.getCartData():this.cartQty}},created:function(){var t=this;this.getProducts(),this.getCartData(),this.$root.$on("Card:refresh",function(){t.getCartData()}),this.$root.$on("CartModal:refresh",function(){t.getCartData()}),this.$root.$on("CardModal:refresh",function(){t.getCartData()})},mounted:function(){},destroyed:function(){this.$root.$off("Card:refresh"),this.$root.$off("CartModal:refresh"),this.$root.$off("CardModal:refresh")},methods:Object(i["a"])({},Object(s["b"])(["setModal"]),{getProducts:function(){var t=this,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.isLoading=!0,this.$http.get("".concat(w,"?page=").concat(a)).then(function(a){if(a.data.success){var o=a.data,n=o.products,e=o.pagination;t.products=t.deepCopy(n),t.pagination=e,t.isLoading=!1,t.$root.$emit("CustomerOrder:Loading",t.isLoading)}else alert("請先登入，以利取得資料"),t.$router.push({name:"login"}),t.isLoading=!1})},getCartData:function(){var t=this;this.$http.get(b).then(function(a){return t.cartQty=a.data.data.carts.length})},changePage:function(t){this.getProducts(t)},showModal:function(){this.setModal("CartModal")},openCart:function(){this.showModal()}})},M=L,k=(o("f13d"),Object(_["a"])(M,n,e,!1,null,null,null));k.options.__file="CustomerOrder.vue";a["default"]=k.exports},"91f1":function(t,a,o){},f13d:function(t,a,o){"use strict";var n=o("1fc3"),e=o.n(n);e.a}}]);
//# sourceMappingURL=chunk-797ac3b2.121241b4.js.map