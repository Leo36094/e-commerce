(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-797ac3b2"],{1799:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"block"},[a("el-pagination",{attrs:{"page-size":10,layout:"total, prev, pager, next","page-count":t.fullValue.total_pages},on:{"current-change":t.changePage},model:{value:t.fullValue,callback:function(e){t.fullValue=e},expression:"fullValue"}})],1)},o=[],r={components:{},props:{value:{type:Object,default:function(){return{}}},changePage:{type:Function,default:function(){return""}}},data:function(){return{}},computed:{fullValue:{get:function(){return this.value},set:function(t){this.$emit("input",t)}}},watch:{},created:function(){},mounted:function(){},destroyed:function(){},methods:{handleCurrentChange:function(t){this.$emit("pagination:onChangePage",t)}}},i=r,c=a("2877"),s=Object(c["a"])(i,n,o,!1,null,null,null);e["a"]=s.exports},"1fc3":function(t,e,a){},"3d4b":function(t,e,a){"use strict";a("91f1")},"729c":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"customer-order"},[a("Loading",{attrs:{active:t.isLoading},on:{"update:active":function(e){t.isLoading=e}}}),t.isNonEmptyArray(t.products)?[a("div",{staticClass:"customer-order-cart",on:{click:t.openCart}},[a("i",{staticClass:"fas fa-lg fa-cart-plus"}),a("div",{staticClass:"customer-order-cart__num",attrs:{value:t.cartQty}},[t._v(t._s(t.handleCartQty))])]),a("div",{staticClass:"customer-order-content"},[a("div",{staticClass:"customer-order-content__card"},[a("Card",{model:{value:t.products,callback:function(e){t.products=e},expression:"products"}})],1)]),a("Pagination",{staticClass:"customer-order__pagination",attrs:{changePage:t.changePage},model:{value:t.pagination,callback:function(e){t.pagination=e},expression:"pagination"}})]:t._e()],2)},o=[],r=(a("8e6e"),a("ac6a"),a("456d"),a("bd86")),i=a("2f62"),c=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"card-container"},[a("Loading",{attrs:{active:t.isLoading},on:{"update:active":function(e){t.isLoading=e}}}),t._l(t.fullValue,(function(e){return a("el-card",{key:e.id,staticClass:"card",attrs:{shadow:"hover","body-style":{padding:"0px"}}},[a("div",{staticClass:"card__background",style:{backgroundImage:"url("+e.imageUrl+")"}}),a("div",{staticClass:"card-info"},[a("div",{staticClass:"form__row card-info__item"},[a("span",[t._v(t._s(e.title))]),a("el-tag",{attrs:{size:"medium",type:"info"}},[t._v(t._s(e.category))])],1),a("div",{staticClass:"form__row card-info__item"},[a("p",[t._v(t._s(e.description))])]),a("div",{staticClass:"form__row card-info__item"},[a("h4",{staticClass:"card-info__item__original-price"},[t._v("原價：$"+t._s(1.8*parseInt(e.price)))]),a("span",[t._v("售價： $"+t._s(e.price))])]),a("div",{staticClass:"form__row"},[a("Button",{staticClass:"card-info__btn",attrs:{btnName:"了解更多"},nativeOn:{click:function(a){return t.openModal(e.id)}}}),a("Button",{staticClass:"card-info__btn",attrs:{colorType:"special",btnName:"加入購物車"},nativeOn:{click:function(a){return t.addToCart(e.id,e.num)}}})],1)])])}))],2)},s=[],u=a("3398");function d(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function l(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?d(Object(a),!0).forEach((function(e){Object(r["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):d(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var p="".concat("https://vue-course-api.hexschool.io/","api/").concat("leochuang","/product/"),f="".concat("https://vue-course-api.hexschool.io/","api/leochuang/cart"),h={components:{Button:u["a"]},props:{value:{type:Array,default:function(){return[]}}},data:function(){return{showModal:!1,product:{},cartLength:"",isLoading:!1}},computed:{fullValue:{get:function(){return this.value},set:function(t){this.$emit("input",t)}}},watch:{},created:function(){},mounted:function(){},methods:l(l({},Object(i["b"])(["setModalData","setModal"])),{},{openModal:function(t){var e=this;this.showModal=!0,this.isLoading=!0,this.$http.get("".concat(p).concat(t)).then((function(t){if(t.data.success){var a=t.data.product;e.product=e.deepCopy(a),e.setModalData(e.product),e.setModal("CardModal"),e.isLoading=!1}else alert("請先登入，以利取得資料"),e.$router.push({name:"login"}),e.isLoading=!1}))},addToCart:function(t){var e=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;this.isLoading=!0,this.$http.post(f,{data:{product_id:t,qty:a}}).then((function(){e.showModal=!1,e.$root.$emit("Card:refresh"),e.isLoading=!1,e.notifySuccess("成功加入購物車")}))},notifySuccess:function(t){this.$message({showClose:!0,message:t,type:"success"})}})},g=h,v=(a("3d4b"),a("2877")),m=Object(v["a"])(g,c,s,!1,null,null,null),b=m.exports,y=a("1799");function _(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function C(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?_(Object(a),!0).forEach((function(e){Object(r["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):_(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var O="https://vue-course-api.hexschool.io/api/leochuang/cart",w={components:{Card:b,Pagination:y["a"]},props:{productApi:{type:String,default:function(){return"".concat("https://vue-course-api.hexschool.io/","api/").concat("leochuang","/admin/products")}}},data:function(){return{products:[],pagination:{},cartQty:"",isLoading:!1}},computed:{handleCartQty:function(){return this.cartQty>9?"9+":this.cartQty}},watch:{cartQty:function(t){t?this.getCartData():this.cartQty}},created:function(){var t=this;this.getProducts(),this.getCartData(),this.$root.$on("Card:refresh",(function(){t.getCartData()})),this.$root.$on("CartModal:refresh",(function(){t.getCartData()})),this.$root.$on("CardModal:refresh",(function(){t.getCartData()}))},mounted:function(){},destroyed:function(){this.$root.$off("Card:refresh"),this.$root.$off("CartModal:refresh"),this.$root.$off("CardModal:refresh")},methods:C(C({},Object(i["b"])(["setModal"])),{},{getProducts:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.isLoading=!0,this.$http.get("".concat(this.productApi,"?page=").concat(e)).then((function(e){if(e.data.success){var a=e.data,n=a.products,o=a.pagination;t.products=t.deepCopy(n),t.pagination=o,t.isLoading=!1,t.$root.$emit("CustomerOrder:Loading",t.isLoading)}else alert("請先登入，以利取得資料"),t.$router.push({name:"login"}),t.isLoading=!1}))},getCartData:function(){var t=this;this.$http.get(O).then((function(e){return t.cartQty=e.data.data.carts.length}))},changePage:function(t){this.getProducts(t)},showModal:function(){this.setModal("CartModal")},openCart:function(){this.showModal()}})},$=w,j=(a("f13d"),Object(v["a"])($,n,o,!1,null,null,null));e["default"]=j.exports},"91f1":function(t,e,a){},f13d:function(t,e,a){"use strict";a("1fc3")}}]);
//# sourceMappingURL=chunk-797ac3b2.3d0d07b9.js.map