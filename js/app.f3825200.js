(function(t){function e(e){for(var n,o,s=e[0],c=e[1],l=e[2],u=0,p=[];u<s.length;u++)o=s[u],Object.prototype.hasOwnProperty.call(r,o)&&r[o]&&p.push(r[o][0]),r[o]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(t[n]=c[n]);d&&d(e);while(p.length)p.shift()();return i.push.apply(i,l||[]),a()}function a(){for(var t,e=0;e<i.length;e++){for(var a=i[e],n=!0,o=1;o<a.length;o++){var s=a[o];0!==r[s]&&(n=!1)}n&&(i.splice(e--,1),t=c(c.s=a[0]))}return t}var n={},o={app:0},r={app:0},i=[];function s(t){return c.p+"js/"+({}[t]||t)+"."+{"chunk-03a01964":"5f0d2f0a","chunk-1d0e7b82":"804b55af","chunk-2499786c":"7720d824","chunk-2b4019b3":"60f87242","chunk-49f9f530":"654b17df","chunk-73f3d6f7":"4db45be4","chunk-797ac3b2":"3d0d07b9","chunk-87ce5780":"0adc0987","chunk-c32ea700":"1d59c779","chunk-f6376922":"6133ff97"}[t]+".js"}function c(e){if(n[e])return n[e].exports;var a=n[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,c),a.l=!0,a.exports}c.e=function(t){var e=[],a={"chunk-03a01964":1,"chunk-1d0e7b82":1,"chunk-2499786c":1,"chunk-2b4019b3":1,"chunk-49f9f530":1,"chunk-73f3d6f7":1,"chunk-797ac3b2":1,"chunk-87ce5780":1,"chunk-c32ea700":1,"chunk-f6376922":1};o[t]?e.push(o[t]):0!==o[t]&&a[t]&&e.push(o[t]=new Promise((function(e,a){for(var n="css/"+({}[t]||t)+"."+{"chunk-03a01964":"b39aba35","chunk-1d0e7b82":"060320bd","chunk-2499786c":"0613c099","chunk-2b4019b3":"2c4bfc3b","chunk-49f9f530":"908ce16b","chunk-73f3d6f7":"51d659c1","chunk-797ac3b2":"77aaadda","chunk-87ce5780":"b03cc4f6","chunk-c32ea700":"fc76b72e","chunk-f6376922":"0613c099"}[t]+".css",r=c.p+n,i=document.getElementsByTagName("link"),s=0;s<i.length;s++){var l=i[s],u=l.getAttribute("data-href")||l.getAttribute("href");if("stylesheet"===l.rel&&(u===n||u===r))return e()}var p=document.getElementsByTagName("style");for(s=0;s<p.length;s++){l=p[s],u=l.getAttribute("data-href");if(u===n||u===r)return e()}var d=document.createElement("link");d.rel="stylesheet",d.type="text/css",d.onload=e,d.onerror=function(e){var n=e&&e.target&&e.target.src||r,i=new Error("Loading CSS chunk "+t+" failed.\n("+n+")");i.code="CSS_CHUNK_LOAD_FAILED",i.request=n,delete o[t],d.parentNode.removeChild(d),a(i)},d.href=r;var f=document.getElementsByTagName("head")[0];f.appendChild(d)})).then((function(){o[t]=0})));var n=r[t];if(0!==n)if(n)e.push(n[2]);else{var i=new Promise((function(e,a){n=r[t]=[e,a]}));e.push(n[2]=i);var l,u=document.createElement("script");u.charset="utf-8",u.timeout=120,c.nc&&u.setAttribute("nonce",c.nc),u.src=s(t);var p=new Error;l=function(e){u.onerror=u.onload=null,clearTimeout(d);var a=r[t];if(0!==a){if(a){var n=e&&("load"===e.type?"missing":e.type),o=e&&e.target&&e.target.src;p.message="Loading chunk "+t+" failed.\n("+n+": "+o+")",p.name="ChunkLoadError",p.type=n,p.request=o,a[1](p)}r[t]=void 0}};var d=setTimeout((function(){l({type:"timeout",target:u})}),12e4);u.onerror=u.onload=l,document.head.appendChild(u)}return Promise.all(e)},c.m=t,c.c=n,c.d=function(t,e,a){c.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},c.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},c.t=function(t,e){if(1&e&&(t=c(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(c.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)c.d(a,n,function(e){return t[e]}.bind(null,n));return a},c.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return c.d(e,"a",e),e},c.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},c.p="/e-commerce/",c.oe=function(t){throw console.error(t),t};var l=window["webpackJsonp"]=window["webpackJsonp"]||[],u=l.push.bind(l);l.push=e,l=l.slice();for(var p=0;p<l.length;p++)e(l[p]);var d=u;i.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"0e33":function(t,e,a){"use strict";a("871e")},"20e8":function(t,e,a){},2609:function(t,e,a){},2655:function(t,e,a){},"26ef":function(t,e,a){"use strict";a("7925")},3398:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-button",{staticClass:"button",attrs:{"data-color-type":t.colorType}},[t._v(t._s(t.btnName))])},o=[],r={components:{},props:{colorType:{type:String,default:function(){return"default"}},btnName:{type:String,default:function(){return"新增"}}},data:function(){return{}},computed:{},watch:{},created:function(){},mounted:function(){},methods:{}},i=r,s=(a("e51e"),a("2877")),c=Object(s["a"])(i,n,o,!1,null,null,null);e["a"]=c.exports},"37a6":function(t,e,a){},"3d74":function(t,e,a){},"42b7":function(t,e,a){"use strict";a("f66b")},4329:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"label"},[a("label",{attrs:{for:t.forName,"data-required":t.dataRequired}},[t._v(t._s(t.labelName))])])},o=[],r={components:{},props:{forName:{type:String,default:function(){return""}},labelName:{type:String,default:function(){return""}},dataRequired:{type:Boolean,default:function(){return!1}}},data:function(){return{}},computed:{},watch:{},created:function(){},mounted:function(){},methods:{}},i=r,s=(a("9b99"),a("2877")),c=Object(s["a"])(i,n,o,!1,null,null,null);e["a"]=c.exports},"4bb6":function(t,e,a){},"4cbd":function(t,e,a){},"4d84":function(t,e,a){"use strict";a("2609")},"52ec":function(t,e,a){},"56d7":function(t,e,a){"use strict";a.r(e),a.d(e,"instance",(function(){return ve}));a("cadf"),a("551c"),a("f751"),a("097d");var n=a("2b0e"),o=a("2f62"),r=a("8c4f");n["default"].use(r["a"]);var i=new r["a"]({mode:"history",base:"/e-commerce/",routes:[{path:"*",redirect:"/"},{path:"/login",name:"login",component:function(){return a.e("chunk-2b4019b3").then(a.bind(null,"6b27"))}},{path:"/",name:"home",component:function(){return a.e("chunk-03a01964").then(a.bind(null,"b3d7"))}},{path:"/products",name:"home_products",component:function(){return a.e("chunk-1d0e7b82").then(a.bind(null,"2642"))}},{path:"/shoppingCart/:orderId",name:"shopping_cart",component:function(){return a.e("chunk-c32ea700").then(a.bind(null,"91ac"))}},{path:"/admin",name:"admin",component:function(){return a.e("chunk-73f3d6f7").then(a.bind(null,"5c3a"))},meta:{requiresAuth:!0},children:[{path:"/admin",name:"admin_products",component:function(){return a.e("chunk-87ce5780").then(a.bind(null,"6d09"))},meta:{requiresAuth:!0}},{path:"/admin/order",name:"admin_order",component:function(){return a.e("chunk-2499786c").then(a.bind(null,"a79b"))},meta:{requiresAuth:!0}},{path:"/admin/coupon",name:"admin_coupon",component:function(){return a.e("chunk-f6376922").then(a.bind(null,"b615"))}},{path:"/admin/customer_order",name:"customer_order",component:function(){return a.e("chunk-797ac3b2").then(a.bind(null,"729c"))}},{path:"/admin/checkout/:orderId",name:"checkout",component:function(){return a.e("chunk-49f9f530").then(a.bind(null,"7007"))}}]}]}),s=a("bc3a"),c=a.n(s),l=a("a7fe"),u=a.n(l),p=a("5c96"),d=a.n(p),f=a("9062"),m=a.n(f),h=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app",style:t.isModalShow&&{overflow:"hidden"},attrs:{id:"app"}},[a("div",{staticClass:"app-content"},[a("router-view"),t.isPopupShow?a("transition",{attrs:{name:"page"}},[a("BackgroundMask",{nativeOn:{click:function(e){return t.closePopup.apply(null,arguments)}}})],1):t._e(),a("transition",{attrs:{name:"Popup"}},[t.isPopupShow?a("Popup",{staticClass:"dashboard__popup"}):t._e()],1),a("transition",{attrs:{name:"page"}},[t.isModalShow?a("Modal"):t._e()],1)],1)])},b=[],v=(a("8e6e"),a("ac6a"),a("456d"),a("bd86")),g=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"side-popup-wrapper"},[a(t.PopupComponent,{tag:"component",staticClass:"side-popup"})],1)},_=[],y=a("888c"),O=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"create-coupon-form"},[a("Loading",{attrs:{active:t.isLoading},on:{"update:active":function(e){t.isLoading=e}}}),a("PopupHeader",[t.addForm?[a("div",[a("h1",[t._v("新建優惠卷")])])]:[a("div",[a("h1",[t._v("編輯優惠卷")])])]],2),a("PopupContent",[a("div",{staticClass:"form__row"},[a("div",{staticClass:"form__column full margin-bottom10px"},[a("Label",{attrs:{"data-required":!0,labelName:"優惠卷名稱"}}),a("Input",{model:{value:t.form.title,callback:function(e){t.$set(t.form,"title",e)},expression:"form.title"}})],1),a("div",{staticClass:"form__column full"},[a("Label",{attrs:{"data-required":!0,labelName:"有效期限"}}),a("el-date-picker",{attrs:{type:"date",placeholder:"選擇日期"},model:{value:t.form.due_date,callback:function(e){t.$set(t.form,"due_date",e)},expression:"form.due_date"}})],1),a("div",{staticClass:"form__column full"},[a("Label",{attrs:{"data-required":!0,labelName:"折扣 (%)"}}),a("Input",{model:{value:t.form.percent,callback:function(e){t.$set(t.form,"percent",e)},expression:"form.percent"}})],1),a("div",{staticClass:"form__column full"},[a("Label",{attrs:{"data-required":!0,labelName:"優惠卷代碼"}}),a("Input",{model:{value:t.form.code,callback:function(e){t.$set(t.form,"code",e)},expression:"form.code"}})],1),a("div",{staticClass:"form__column full"},[a("SwitchBtn",{model:{value:t.form.is_enabled,callback:function(e){t.$set(t.form,"is_enabled",e)},expression:"form.is_enabled"}})],1)])]),a("PopupFooter",[t.addForm?[a("Button",{nativeOn:{click:function(e){return e.preventDefault(),t.submit.apply(null,arguments)}}}),a("Button",{attrs:{btnName:"取消"},nativeOn:{click:function(e){return e.preventDefault(),t.cancel.apply(null,arguments)}}})]:[a("Button",{attrs:{btnName:"儲存"},nativeOn:{click:function(e){return e.preventDefault(),t.saveForm.apply(null,arguments)}}}),a("Button",{attrs:{btnName:"取消"},nativeOn:{click:function(e){return e.preventDefault(),t.cancel.apply(null,arguments)}}})]],2)],1)},P=[],j=a("fac7"),C=a("8fbc"),w=a("c2b7"),k=a("3398"),S=a("4329"),D=a("e433"),$=a("6291");function x(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function L(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?x(Object(a),!0).forEach((function(e){Object(v["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):x(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var N="".concat("https://vue-course-api.hexschool.io/"),M="api/leochuang/admin/coupon/",I={components:{PopupHeader:j["a"],PopupContent:C["a"],PopupFooter:w["a"],Button:k["a"],Input:D["a"],Label:S["a"],SwitchBtn:$["a"]},props:{},data:function(){return{form:{title:"",is_enabled:1,percent:80,due_date:"",code:""},addForm:!0,isLoading:!1}},computed:L({},Object(o["c"])(["PopupData"])),watch:{},created:function(){this.getFormInitial()},mounted:function(){},destroyed:function(){},methods:L(L({},Object(o["b"])(["setPopupComponent"])),{},{init:function(){this.getFormInitial()},getFormInitial:function(){if(this.PopupData){var t=this.deepCopy(this.PopupData);this.form=t,this.addForm=!1}else this.addForm=!0},submit:function(){var t=this,e=this.deepCopy(this.form);this.isLoading=!0,this.$http.post("".concat(N).concat(M),{data:e}).then((function(e){t.isLoading=!1,t.refreshTableData(),t.setPopupComponent(""),t.notifySuccess("新增成功")}))},saveForm:function(){var t=this;this.isLoading=!0;var e=this.deepCopy(this.form);delete e.image,this.$http.put("".concat(N).concat(M).concat(this.form.id),{data:e}).then((function(e){t.isLoading=!1,t.refreshTableData(),t.setPopupComponent(""),t.notifySuccess("儲存成功")}))},cancel:function(){this.setPopupComponent("")},refreshTableData:function(){this.$root.$emit("Coupon:refreshPageTableData")},notifySuccess:function(t){this.$message({showClose:!0,message:t,type:"success"})}})},E=I,T=(a("26ef"),a("2877")),q=Object(T["a"])(E,O,P,!1,null,null,null),F=q.exports,B=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"order-form"},[a("Loading",{attrs:{active:t.isLoading},on:{"update:active":function(e){t.isLoading=e}}}),a("PopupHeader",[a("div",[a("h1",[t._v("查看訂單")])])]),a("PopupContent",[a("div",{staticClass:"form__row"},[a("div",{staticClass:"form__column half"},[a("Label",{attrs:{labelName:"姓名"}}),a("Input",{attrs:{readonly:""},model:{value:t.form.user.name,callback:function(e){t.$set(t.form.user,"name",e)},expression:"form.user.name"}})],1),a("div",{staticClass:"form__column half"},[a("Label",{attrs:{labelName:"Email"}}),a("Input",{attrs:{readonly:""},model:{value:t.form.user.email,callback:function(e){t.$set(t.form.user,"email",e)},expression:"form.user.email"}})],1),a("div",{staticClass:"form__column half"},[a("Label",{attrs:{labelName:"電話"}}),a("Input",{attrs:{readonly:""},model:{value:t.form.user.tel,callback:function(e){t.$set(t.form.user,"tel",e)},expression:"form.user.tel"}})],1),a("div",{staticClass:"form__column half"},[a("Label",{attrs:{labelName:"付款狀態"}}),a("Input",{attrs:{readonly:""},model:{value:t.renderPayment,callback:function(e){t.renderPayment=e},expression:"renderPayment"}})],1),a("div",{staticClass:"form__column full"},[a("Label",{attrs:{labelName:"住址"}}),a("Input",{attrs:{readonly:""},model:{value:t.form.user.address,callback:function(e){t.$set(t.form.user,"address",e)},expression:"form.user.address"}})],1),a("div",{staticClass:"form__column half"},[a("Label",{attrs:{labelName:"訂單日期"}}),a("el-date-picker",{attrs:{readonly:"",type:"date",placeholder:"選擇日期"},model:{value:1e3*t.form.create_at,callback:function(e){t.$set(t.form,"create_at * 1000",e)},expression:"form.create_at * 1000"}})],1),t.form.is_paid?a("div",{staticClass:"form__column half"},[a("Label",{attrs:{labelName:"付款時間"}}),a("el-date-picker",{attrs:{readonly:"",type:"date",placeholder:"選擇日期"},model:{value:1e3*t.form.paid_date,callback:function(e){t.$set(t.form,"paid_date * 1000",e)},expression:"form.paid_date * 1000"}})],1):t._e(),a("div",{staticClass:"form__column full"},[a("Label",{attrs:{labelName:"客戶備註"}}),a("TextArea",{attrs:{readonly:""},model:{value:t.form.message,callback:function(e){t.$set(t.form,"message",e)},expression:"form.message"}})],1)]),a("div",{staticClass:"form__column full"},[a("Label",{attrs:{labelName:"購買產品"}})],1),a("div",{staticClass:"table"},[a("div",{staticClass:"table-item"},[a("p",{staticClass:"table-item__product"},[t._v("產品名稱")]),a("p",{staticClass:"table-item__qty"},[t._v("數量")]),a("p",{staticClass:"table-item__price"},[t._v("單價")]),t.form.products.coupon?t._e():a("p",{staticClass:"table-item__discount"},[t._v("折扣價")])]),t._l(t.products,(function(e,n){return a("div",{key:e.id,staticClass:"table-item"},[a("p",{staticClass:"table-item__product"},[t._v(t._s(e.product.title))]),a("p",{staticClass:"table-item__qty"},[t._v(t._s(e.qty))]),a("p",{staticClass:"table-item__price"},[t._v(t._s(e.product.price))]),t.form.products.coupon?t._e():a("p",{staticClass:"table-item__discount"},[t._v(t._s(e.final_total))])])})),a("div",{staticClass:"table-total"},[a("p",[t._v("總計： $ "+t._s(t.form.total))])])],2)]),a("PopupFooter",[a("Button",{attrs:{btnName:"確認"},nativeOn:{click:function(e){return e.preventDefault(),t.close.apply(null,arguments)}}})],1)],1)},U=[],A=a("d49f");function V(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function H(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?V(Object(a),!0).forEach((function(e){Object(v["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):V(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var z={components:{PopupHeader:j["a"],PopupContent:C["a"],PopupFooter:w["a"],Button:k["a"],Input:D["a"],Label:S["a"],TextArea:A["a"]},props:{},data:function(){return{form:{create_at:"",id:"",is_paid:"",message:"",paid_date:"",payment_method:"",products:{},total:100,user:{},num:1},isLoading:!1,products:[]}},computed:H(H({},Object(o["c"])(["PopupData"])),{},{renderPayment:function(){return this.form.is_paid?"已付款":"未付款"}}),watch:{},created:function(){this.getFormInitial()},mounted:function(){},destroyed:function(){},methods:H(H({},Object(o["b"])(["setPopupComponent"])),{},{init:function(){this.getFormInitial()},getFormInitial:function(){if(this.PopupData){var t=this.deepCopy(this.PopupData);this.form=t;var e=this.deepCopy(this.form.products),a=Object.keys(e).map((function(t){return e[t]}));this.products=a}},close:function(){this.setPopupComponent("")}})},K=z,R=(a("42b7"),Object(T["a"])(K,B,U,!1,null,null,null)),J=R.exports;function W(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function G(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?W(Object(a),!0).forEach((function(e){Object(v["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):W(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var Q={components:{CreateProductForm:y["a"],CreateCouponForm:F,OrderForm:J},props:{},data:function(){return{}},computed:G({},Object(o["c"])(["PopupComponent"])),watch:{},created:function(){},mounted:function(){},destroyed:function(){this.emptyPopupForm()},methods:G(G({},Object(o["b"])(["setPopupData"])),{},{emptyPopupForm:function(){this.setPopupData("")}})},X=Q,Y=(a("d9c6"),Object(T["a"])(X,g,_,!1,null,null,null)),Z=Y.exports,tt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("transition",{attrs:{name:"modal"}},[a("BackgroundMask",[a("div",{staticClass:"modal-wrapper"},[a("div",{staticClass:"modal-container"},[a(t.modal,{tag:"component",staticClass:"modal"})],1)])])],1)},et=[],at=(a("c5f6"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"background-mask",attrs:{"data-color-type":t.colorType}},[t._t("default")],2)}),nt=[];function ot(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function rt(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?ot(Object(a),!0).forEach((function(e){Object(v["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):ot(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var it={components:{},props:{colorType:{type:String,default:function(){return"dark"}}},data:function(){return{}},computed:{},watch:{},created:function(){},mounted:function(){},methods:rt({},Object(o["b"])(["setPopupComponent"]))},st=it,ct=(a("8b30"),Object(T["a"])(st,at,nt,!1,null,null,null)),lt=ct.exports,ut=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.form?a("div",{staticClass:"card-modal"},[a("Loading",{attrs:{active:t.isLoading},on:{"update:active":function(e){t.isLoading=e}}}),a("h3",{staticClass:"form__row modal__item",attrs:{slot:"header"},slot:"header"},[t._v(t._s(t.form.title))]),a("div",{staticClass:"form__row",attrs:{slot:"body"},slot:"body"},[a("div",{staticClass:"modal__background",style:{backgroundImage:"url("+t.form.imageUrl+")"}}),a("div",{staticClass:"form__column full"},[a("Label",{staticClass:"modal__label",attrs:{labelName:"產品敘述"}}),a("TextArea",{attrs:{readonly:!0,rowHeight:3},model:{value:t.form.description,callback:function(e){t.$set(t.form,"description",e)},expression:"form.description"}})],1),a("div",{staticClass:"form__row modal__item"},[a("h4",{staticClass:"modal__item__original-price"},[t._v("原價：$"+t._s(1.8*parseInt(t.form.price)))]),a("p",[t._v("特價： $"+t._s(t.form.price))])]),a("Select",{staticClass:"form__row modal__select",attrs:{placeholder:"請選擇數量",selectOptions:t.selectOptions},model:{value:t.form.num,callback:function(e){t.$set(t.form,"num",e)},expression:"form.num"}})],1),a("div",{staticClass:"form__row",attrs:{slot:"footer"},slot:"footer"},[a("Button",{staticClass:"modal__btn",attrs:{colorType:"special",btnName:"加入購物車"},nativeOn:{click:function(e){return t.addToCart(t.form.id,t.form.num)}}}),a("Button",{staticClass:"modal__btn",attrs:{btnName:"確認"},nativeOn:{click:function(e){return t.cancel.apply(null,arguments)}}})],1)],1):t._e()},pt=[],dt=a("e01c");function ft(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function mt(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?ft(Object(a),!0).forEach((function(e){Object(v["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):ft(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var ht="https://vue-course-api.hexschool.io/api/leochuang/cart",bt={components:{TextArea:A["a"],Button:k["a"],Label:S["a"],Select:dt["a"]},props:{},data:function(){return{form:{title:"",imageUrl:"",description:"",price:"",num:"",id:""},selectOptions:[{name:"數量1",value:1},{name:"數量2",value:2},{name:"數量3",value:3},{name:"數量4",value:4},{name:"數量5",value:5},{name:"數量6",value:6},{name:"數量7",value:7},{name:"數量8",value:8},{name:"數量9",value:9}],isLoading:!1}},computed:mt({},Object(o["c"])(["modalData"])),watch:{},created:function(){this.init()},mounted:function(){},destroyed:function(){},methods:mt(mt({},Object(o["b"])(["setModal"])),{},{init:function(){this.getFormInitial()},getFormInitial:function(){this.isLoading=!0,this.form=this.deepCopy(this.modalData),this.isLoading=!1},addToCart:function(t){var e=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;this.isLoading=!0,this.$http.post(ht,{data:{product_id:t,qty:a}}).then((function(){e.showModal=!1,e.$root.$emit("CardModal:refresh"),e.isLoading=!1,e.notifySuccess("成功加入購物車"),e.setModal("")}))},notifySuccess:function(t){this.$message({showClose:!0,message:t,type:"success"})},cancel:function(){this.setModal("")}})},vt=bt,gt=(a("6115"),Object(T["a"])(vt,ut,pt,!1,null,null,null)),_t=gt.exports,yt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"cart-modal"},[a("h3",{staticClass:"cart-modal__header form__row modal__item",attrs:{slot:"header"},slot:"header"},[t._v("購物車內容")]),a("div",{staticClass:"cart-modal__table form__row",attrs:{slot:"body"},slot:"body"},[a("Loading",{attrs:{active:t.isLoading},on:{"update:active":function(e){t.isLoading=e}}}),a("el-table",{staticClass:"cart-modal__table-content",attrs:{data:t.tableData.cart,height:"400","empty-text":"購物車是空的 >_<"}},[a("el-table-column",{attrs:{label:"商品"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.product.title))])]}}])}),a("el-table-column",{attrs:{label:"數量"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.qty))])]}}])}),a("el-table-column",{attrs:{label:"單價"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.product.price))])]}}])}),a("el-table-column",{attrs:{label:"合計"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.total))])]}}])}),a("el-table-column",{scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"small",type:"danger",round:"",icon:"el-icon-delete"},on:{click:function(a){return t.handleDelete(e.$index,e.row)}}})]}}])})],1)],1),a("div",{staticClass:"cart-modal-balance"},[a("div",{staticClass:"cart-modal-balance__coupon"},[a("Label",{staticClass:"cart-modal-balance__coupon__label",attrs:{labelName:"優惠卷代碼"}}),a("Button",{attrs:{colorType:"small",btnName:"套用"},nativeOn:{click:function(e){return e.preventDefault(),t.useCoupon.apply(null,arguments)}}}),a("Input",{model:{value:t.code,callback:function(e){t.code=e},expression:"code"}})],1),a("div",{staticClass:"cart-modal-balance__detail"},[a("div",{staticClass:"cart-modal-balance__detail__total"},[a("p",[t._v("總計")]),a("p",[t._v("$ "+t._s(t.tableData.total))])]),t.discount?a("div",{staticClass:"cart-modal-balance__detail__discount"},[a("p",[t._v("折扣後")]),a("p",[t._v("$ "+t._s(t.tableData.finalTotal))])]):t._e()])]),a("div",{staticClass:"cart-modal__footer",attrs:{slot:"footer"},slot:"footer"},[a("Button",{staticClass:"modal__btn",attrs:{btnName:"取消"},nativeOn:{click:function(e){return t.cancel.apply(null,arguments)}}}),a("Button",{staticClass:"modal__btn",attrs:{btnName:"下一步"},nativeOn:{click:function(e){return t.openPaymentModal.apply(null,arguments)}}})],1)])},Ot=[];function Pt(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function jt(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?Pt(Object(a),!0).forEach((function(e){Object(v["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):Pt(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var Ct="https://vue-course-api.hexschool.io/api/leochuang/cart",wt="https://vue-course-api.hexschool.io/api/leochuang/cart",kt="https://vue-course-api.hexschool.io/api/leochuang/coupon",St={components:{Button:k["a"],Label:S["a"],Input:D["a"]},props:{},data:function(){return{tableData:{cart:[],total:"",finalTotal:""},code:"",isLoading:!1,discount:!1}},computed:jt({},Object(o["c"])(["modalData"])),watch:{},created:function(){this.init()},mounted:function(){},destroyed:function(){},methods:jt(jt({},Object(o["b"])(["setModal"])),{},{init:function(){this.getCartData()},getCartData:function(){var t=this;this.isLoading=!0,this.$http.get(Ct).then((function(e){var a=e.data.data,n=a.carts,o=a.total,r=a.final_total;t.tableData.cart=n,t.tableData.total=o,t.tableData.finalTotal=r,t.isLoading=!1}))},cancel:function(){this.setModal("")},handleDelete:function(t,e){var a=this;this.isLoading=!0,this.$http.delete("".concat(wt,"/").concat(e.id),{data:e}).then((function(){a.init(),a.$root.$emit("CartModal:refresh"),a.isLoading=!1,a.deleteMessage()}))},deleteMessage:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"已刪除";this.$message({showClose:!0,message:t,type:"error"})},notifySuccess:function(t){this.$message({showClose:!0,message:t,type:"success"})},useCoupon:function(){var t=this;this.isLoading=!0;var e={code:this.code};this.$http.post(kt,{data:e}).then((function(e){e.data.success?(t.isLoading=!1,t.discount=!0,t.getCartData(),t.notifySuccess("成功套用")):(t.isLoading=!1,t.deleteMessage("找不到優惠券!"))}))},openPaymentModal:function(){this.setModal("PaymentModal")}})},Dt=St,$t=(a("0e33"),Object(T["a"])(Dt,yt,Ot,!1,null,null,null)),xt=$t.exports,Lt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"payment-modal"},[a("div",{staticClass:"payment-modal__header",attrs:{slot:"header"},slot:"header"},[a("div",{staticClass:"el-icon-caret-left payment-modal__header-icon",on:{click:t.back}}),a("h3",[t._v("填寫寄送資訊")])]),a("div",{staticClass:"payment-modal__body",attrs:{slot:"body"},slot:"body"},[a("Loading",{attrs:{active:t.isLoading},on:{"update:active":function(e){t.isLoading=e}}}),a("div",{staticClass:"form__row"},[a("div",{staticClass:"form__column full"},[a("Label",{attrs:{"data-required":"",labelName:"Email"}}),a("Input",{directives:[{name:"validate",rawName:"v-validate",value:"required|email",expression:"'required|email'"}],class:{error:t.errors.has("email")},attrs:{name:"email"},model:{value:t.form.user.email,callback:function(e){t.$set(t.form.user,"email",e)},expression:"form.user.email"}}),t.errors.has("email")?a("span",{staticClass:"payment-modal__reminder"},[t._v(t._s(t.errors.first("email")))]):t._e()],1),a("div",{staticClass:"form__column full"},[a("Label",{attrs:{"data-required":"",labelName:"收件人姓名"}}),a("Input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],class:{error:t.errors.has("name")},attrs:{name:"name"},model:{value:t.form.user.name,callback:function(e){t.$set(t.form.user,"name",e)},expression:"form.user.name"}}),t.errors.has("name")?a("span",{staticClass:"payment-modal__reminder"},[t._v("請輸入姓名")]):t._e()],1),a("div",{staticClass:"form__column full"},[a("Label",{attrs:{"data-required":"",labelName:"收件人電話"}}),a("Input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],class:{error:t.errors.has("phone")},attrs:{name:"phone",type:"number"},model:{value:t.form.user.tel,callback:function(e){t.$set(t.form.user,"tel",e)},expression:"form.user.tel"}}),t.errors.has("phone")?a("span",{staticClass:"payment-modal__reminder"},[t._v("請輸入電話")]):t._e()],1),a("div",{staticClass:"form__column full"},[a("Label",{attrs:{"data-required":"",labelName:"收件人地址"}}),a("Input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],class:{error:t.errors.has("address")},attrs:{name:"address"},model:{value:t.form.user.address,callback:function(e){t.$set(t.form.user,"address",e)},expression:"form.user.address"}}),t.errors.has("address")?a("span",{staticClass:"payment-modal__reminder"},[t._v("請輸入地址")]):t._e()],1),a("div",{staticClass:"form__column full"},[a("Label",{attrs:{labelName:"備註"}}),a("TextArea",{attrs:{rowHeight:5},model:{value:t.form.message,callback:function(e){t.$set(t.form,"message",e)},expression:"form.message"}})],1)])],1),a("div",{staticClass:"cart-modal__footer",attrs:{slot:"footer"},slot:"footer"},[a("Button",{staticClass:"modal__btn",attrs:{btnName:"取消"},nativeOn:{click:function(e){return t.cancel.apply(null,arguments)}}}),a("Button",{staticClass:"modal__btn",attrs:{btnName:"付款去"},nativeOn:{click:function(e){return t.onSubmit.apply(null,arguments)}}})],1)])},Nt=[],Mt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"modal-header"},[t._t("header",(function(){return[t._v("default header")]}))],2),a("div",{staticClass:"modal-body"},[t._t("body",(function(){return[t._v("default body")]}))],2),a("div",{staticClass:"modal-footer"},[t._t("footer")],2)])},It=[],Et={props:{},data:function(){return{}},computed:{},watch:{},created:function(){},mounted:function(){},methods:{}},Tt=Et,qt=(a("5a62"),Object(T["a"])(Tt,Mt,It,!1,null,null,null)),Ft=qt.exports;function Bt(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function Ut(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?Bt(Object(a),!0).forEach((function(e){Object(v["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):Bt(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var At="https://vue-course-api.hexschool.io/api/leochuang/order",Vt={components:{ModalContent:Ft,TextArea:A["a"],Button:k["a"],Label:S["a"],Input:D["a"]},props:{},data:function(){return{form:{user:{name:"",email:"",tel:"",address:""},message:""},isLoading:!1}},computed:Ut({},Object(o["c"])(["modalData"])),watch:{},created:function(){},mounted:function(){},destroyed:function(){},methods:Ut(Ut({},Object(o["b"])(["setModal"])),{},{onSubmit:function(){var t=this;this.$validator.validate().then((function(e){e?(t.isLoading=!0,t.$http.post(At,{data:t.form}).then((function(e){var a=document.querySelector("header");if(e.data.success&&a)t.isLoading=!1,t.$router.push("/shoppingCart/".concat(e.data.orderId)),t.setModal("");else{if(!e.data.success)return t.isLoading=!1,void t.errorMessage("傳送失敗，再試一次");t.isLoading=!1,t.$router.push("/admin/checkout/".concat(e.data.orderId)),t.setModal("")}}))):t.errorMessage("資料不完整")}))},cancel:function(){this.setModal("")},errorMessage:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"已刪除";this.$message({showClose:!0,message:t,type:"error"})},notifySuccess:function(t){this.$message({showClose:!0,message:t,type:"success"})},back:function(){this.setModal("CartModal")}})},Ht=Vt,zt=(a("9161"),Object(T["a"])(Ht,Lt,Nt,!1,null,null,null)),Kt=zt.exports;function Rt(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function Jt(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?Rt(Object(a),!0).forEach((function(e){Object(v["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):Rt(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var Wt={components:{BackgroundMask:lt,CardModal:_t,CartModal:xt,PaymentModal:Kt},props:{scrollPosition:{type:[Number,String],default:function(){return 0}}},data:function(){return{}},computed:Jt({},Object(o["c"])(["modal"])),watch:{},created:function(){},mounted:function(){},destroyed:function(){this.emptyModalForm()},methods:Jt(Jt({},Object(o["b"])(["setModalData"])),{},{emptyModalForm:function(){this.setModalData("")}})},Gt=Wt,Qt=(a("fab6"),Object(T["a"])(Gt,tt,et,!1,null,null,null)),Xt=Qt.exports;a("b575");function Yt(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function Zt(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?Yt(Object(a),!0).forEach((function(e){Object(v["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):Yt(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var te={components:{Popup:Z,Modal:Xt,BackgroundMask:lt},props:{},data:function(){return{isLoading:!1}},watch:{PopupComponent:function(t){t?this.setPopupShow(!0):this.setPopupShow(!1)},modal:function(t){t?this.setModalShow(!0):this.setModalShow(!1)}},computed:Zt({},Object(o["c"])(["isPopupShow","PopupComponent","isModalShow","modal"])),created:function(){},mounted:function(){},destroyed:function(){},methods:Zt(Zt({},Object(o["b"])(["setPopupShow","setModalShow","setPopupComponent"])),{},{closePopup:function(){this.setPopupComponent("")}})},ee=te,ae=(a("7faf"),Object(T["a"])(ee,h,b,!1,null,null,null)),ne=ae.exports,oe={setPopupShow:function(t,e){t.isPopupShow=e},setPopupComponent:function(t,e){t.PopupComponent=e},setPopupData:function(t,e){t.PopupData=e},setModalShow:function(t,e){t.isModalShow=e},setModalData:function(t,e){t.modalData=e},setModal:function(t,e){t.modal=e}},re=oe,ie={setPopupShow:function(t,e){var a=t.commit;a("setPopupShow",e)},setPopupComponent:function(t,e){var a=t.commit;a("setPopupComponent",e)},setPopupData:function(t,e){var a=t.commit;a("setPopupData",e)},setModalShow:function(t,e){var a=t.commit;a("setModalShow",e)},setModalData:function(t,e){var a=t.commit;a("setModalData",e)},setModal:function(t,e){var a=t.commit;a("setModal",e)}},se=ie,ce={isPopupShow:function(t){return t.isPopupShow},PopupComponent:function(t){return t.PopupComponent},PopupData:function(t){return t.PopupData},modalData:function(t){return t.modalData},isModalShow:function(t){return t.isModalShow},modal:function(t){return t.modal}},le=ce;n["default"].use(o["a"]);var ue=new o["a"].Store({strict:!0,state:{isPopupShow:!1,PopupComponent:"",PopupData:"",isModalShow:!1,modalData:"",modal:""},mutations:re,actions:se,getters:le}),pe=ue,de=(a("a481"),function(t){var e=Number(t);return"$".concat(e.toFixed(0).replace(/./g,(function(t,e,a){var n=e&&"."!==t&&(a.length-e)%3===0?", ".concat(t).replace(/\s/g,""):t;return n})))}),fe=a("7bb1"),me=a("427f"),he=a.n(me);n["default"].mixin({methods:{deepCopy:function(t){var e=JSON.stringify(t),a=JSON.parse(e);return a},isNonEmptyArray:function(t){return!!(Array.isArray(t)&&t.length>0)}}});a("e40d"),a("0fae");n["default"].use(o["a"]),n["default"].use(d.a,u.a),n["default"].use(fe["a"]),n["default"].component("Loading",m.a),n["default"].filter("currency",de),fe["a"].Validator.localize("zh-TW",he.a),n["default"].config.productionTip=!1;var be=localStorage.getItem("token"),ve=c.a.create({baseURL:"".concat("https://vue-course-api.hexschool.io/"),headers:{Authorization:be}});n["default"].prototype.$http=ve,new n["default"]({router:i,store:pe,render:function(t){return t(ne)}}).$mount("#app"),i.beforeEach((function(t,e,a){var n="https://vue-course-api.hexschool.io/api/user/check";t.meta.requiresAuth?c.a.post(n).then((function(t){t.data.success&&a(),t.data.success||i.push({name:"login"})})):a()}))},"5a62":function(t,e,a){"use strict";a("20e8")},6062:function(t,e,a){"use strict";a("4cbd")},6115:function(t,e,a){"use strict";a("3d74")},6291:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"switch-button"},[a("el-switch",{attrs:{"active-value":1,"inactive-value":0,"active-text":"啟用","inactive-text":"停用","active-color":"#27bec2"},model:{value:t.fullValue,callback:function(e){t.fullValue=e},expression:"fullValue"}})],1)},o=[],r=(a("c5f6"),{components:{},props:{value:{type:[Number,String],default:1}},data:function(){return{switchValue:!0}},computed:{fullValue:{get:function(){return this.value},set:function(t){this.$emit("input",t)}}},watch:{},created:function(){},mounted:function(){},methods:{}}),i=r,s=(a("f4fb"),a("2877")),c=Object(s["a"])(i,n,o,!1,null,null,null);e["a"]=c.exports},6619:function(t,e,a){"use strict";a("c0dd")},7115:function(t,e,a){"use strict";a("52ec")},7271:function(t,e,a){},7925:function(t,e,a){},"7faf":function(t,e,a){"use strict";a("8fba")},"871e":function(t,e,a){},"888c":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"create-product-form"},[a("Loading",{attrs:{active:t.isLoading},on:{"update:active":function(e){t.isLoading=e}}}),a("PopupHeader",[t.addForm?[a("div",[a("h1",[t._v("新建產品")])])]:[a("div",[a("h1",[t._v("編輯產品")])])]],2),a("PopupContent",[a("div",{staticClass:"form__row"},[a("div",{staticClass:"form__column full"},[a("UploadImg",{staticClass:"upload-img",attrs:{imageUrl:t.form.imageUrl,url:t.pictureApi},model:{value:t.form.image,callback:function(e){t.$set(t.form,"image",e)},expression:"form.image"}})],1),a("div",{staticClass:"form__column full margin-bottom10px"},[a("Label",{attrs:{"data-required":!0,labelName:"產品類型"}}),a("Input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],class:{error:t.errors.has("category")},attrs:{name:"category"},model:{value:t.form.category,callback:function(e){t.$set(t.form,"category",e)},expression:"form.category"}})],1),a("div",{staticClass:"form__column full"},[a("Label",{attrs:{"data-required":!0,labelName:"產品名稱"}}),a("Input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],class:{error:t.errors.has("title")},attrs:{name:"title"},model:{value:t.form.title,callback:function(e){t.$set(t.form,"title",e)},expression:"form.title"}})],1),a("div",{staticClass:"form__column full"},[a("Label",{attrs:{labelName:"產品敘述"}}),a("TextArea",{attrs:{type:"textarea",rowHeight:3,placeholder:"敘述內容"},model:{value:t.form.description,callback:function(e){t.$set(t.form,"description",e)},expression:"form.description"}})],1),a("div",{staticClass:"form__column full"},[a("Label",{attrs:{"data-required":!0,labelName:"成本價錢"}}),a("Input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],class:{error:t.errors.has("origin_price")},attrs:{name:"origin_price"},model:{value:t.form.origin_price,callback:function(e){t.$set(t.form,"origin_price",e)},expression:"form.origin_price"}})],1),a("div",{staticClass:"form__column full"},[a("Label",{attrs:{"data-required":!0,labelName:"販售價格"}}),a("Input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],class:{error:t.errors.has("price")},attrs:{name:"price"},model:{value:t.form.price,callback:function(e){t.$set(t.form,"price",e)},expression:"form.price"}})],1),a("div",{staticClass:"form__column full"},[a("SwitchBtn",{model:{value:t.form.is_enabled,callback:function(e){t.$set(t.form,"is_enabled",e)},expression:"form.is_enabled"}})],1)])]),a("PopupFooter",[t.addForm?[a("Button",{nativeOn:{click:function(e){return e.preventDefault(),t.submit.apply(null,arguments)}}}),a("Button",{attrs:{btnName:"取消"},nativeOn:{click:function(e){return e.preventDefault(),t.cancel.apply(null,arguments)}}})]:[a("Button",{attrs:{btnName:"儲存"},nativeOn:{click:function(e){return e.preventDefault(),t.saveForm.apply(null,arguments)}}}),a("Button",{attrs:{btnName:"取消"},nativeOn:{click:function(e){return e.preventDefault(),t.cancel.apply(null,arguments)}}})]],2)],1)},o=[],r=(a("8e6e"),a("ac6a"),a("456d"),a("bd86")),i=a("2f62"),s=a("fac7"),c=a("8fbc"),l=a("c2b7"),u=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"upload-img"},[t.fullValue?a("div",{staticClass:"upload-img__file",style:{backgroundImage:"url("+t.fullValue+")"},on:{click:t.previewImg}}):t.imageUrl?a("div",{staticClass:"upload-img__file",style:{backgroundImage:"url("+t.imageUrl+")"},on:{click:t.previewImg}}):a("button",{staticClass:"upload-img__btn",on:{click:t.previewImg}},[t._v("圖片預覽")]),a("input",{ref:"fileInput",staticClass:"input",attrs:{type:"file",accept:"image/gif, image/jpeg, image/png"},on:{change:t.fileSelected}}),a("div",{staticClass:"upload-img__upload"},[a("Button",{attrs:{btnName:"點選上傳圖片"},nativeOn:{click:function(e){return t.uploadImg.apply(null,arguments)}}}),t.status.fileUploading?a("div",{staticClass:"el-icon-loading"}):t._e(),t.errorText?a("span",{staticClass:"errorText"},[t._v("容量限制在 1MB 以下。")]):t._e(),t.successText?a("span",{staticClass:"successText"},[t._v("檔案已上傳，請按下方儲存")]):t._e()],1)])},p=[],d=(a("c5f6"),a("e433")),f=a("3398"),m={components:{Input:d["a"],Button:f["a"]},props:{value:{type:[Object,String,File],default:""},url:{type:String,default:""},imageUrl:{type:String,default:""}},data:function(){return{errorText:!1,successText:!1,limitedSize:Number(1048576),files:"",status:{fileUploading:!1}}},watch:{},computed:{fullValue:{get:function(){return this.value},set:function(t){this.$emit("input",t)}}},created:function(){},mounted:function(){},destroyed:function(){},methods:{fileSelected:function(t){this.files=t.target.files[0];var e=this.files;this.$root.$emit("UploadImg:file",e);var a=new FileReader;a.addEventListener("load",this.imgLoaded),a.readAsDataURL(this.files)},imgLoaded:function(t){this.fullValue=t.target.result},previewImg:function(){this.$refs.fileInput.click()},uploadImg:function(){var t=this;if(this.files){var e=new FormData;e.append("file-to-upload",this.files),this.status.fileUploading=!0,this.files.size>this.limitedSize?(this.errorText=!0,this.status.fileUploading=!1):(this.errorText=!1,this.$http.post(this.url,e,{headers:{"Content-Type":"multipart/form-data"}}).then((function(e){if(e.data.success){t.status.fileUploading=!1;var a=e.data.imageUrl;t.$root.$emit("UploadImg:imageUrl",a),t.successText=!0}else t.errorText=!0,t.status.fileUploading=!1})))}else this.errorMessage("請先新增圖片")},errorMessage:function(t){this.$message({showClose:!0,message:t,type:"error"})}}},h=m,b=(a("6062"),a("2877")),v=Object(b["a"])(h,u,p,!1,null,null,null),g=v.exports,_=a("d49f"),y=a("4329"),O=a("6291");function P(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function j(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?P(Object(a),!0).forEach((function(e){Object(r["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):P(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var C="".concat("https://vue-course-api.hexschool.io/"),w="api/".concat("leochuang","/admin/product/"),k="api/".concat("leochuang","/admin/upload/"),S={components:{PopupHeader:s["a"],PopupContent:c["a"],PopupFooter:l["a"],UploadImg:g,TextArea:_["a"],Button:f["a"],Input:d["a"],Label:y["a"],SwitchBtn:O["a"]},props:{},data:function(){return{form:{title:"",category:"",origin_price:"",price:"",unit:"",image:"",description:"",content:"",is_enabled:1,imageUrl:"",id:""},addForm:!0,isLoading:!1,pictureApi:"".concat(C).concat(k),cacheImg:{}}},computed:j({},Object(i["c"])(["PopupData"])),watch:{},created:function(){var t=this;this.isLoading=!0,this.init(),this.$root.$on("UploadImg:imageUrl",(function(e){t.$set(t.form,"imageUrl",e)})),this.$root.$on("UploadImg:file",(function(e){t.$set(t,"cacheImg",e)})),this.isLoading=!1},mounted:function(){},destroyed:function(){this.$root.$off("UploadImg:imageUrl"),this.$root.$off("UploadImg:file")},methods:j(j({},Object(i["b"])(["setPopupComponent"])),{},{init:function(){this.getFormInitial()},getFormInitial:function(){if(this.PopupData){var t=this.deepCopy(this.PopupData);this.form=t,this.addForm=!1}else this.addForm=!0},submit:function(){var t=this;this.$validator.validate().then((function(e){if(e){t.isLoading=!0;var a=t.deepCopy(t.form);a.image=t.cacheImg,t.isLoading=!0,t.$http.post("".concat(C).concat(w),{data:a}).then((function(e){t.refreshTableData(),t.isLoading=!1,t.setPopupComponent(""),t.notifySuccess("新增成功")}))}else t.errorMessage("資料不完整")}))},saveForm:function(){var t=this;this.isLoading=!0;var e=this.deepCopy(this.form);delete e.image,this.$http.put("".concat(C).concat(w).concat(this.form.id),{data:e}).then((function(e){t.refreshTableData(),t.isLoading=!1,t.setPopupComponent(""),t.notifySuccess("儲存成功")}))},cancel:function(){this.setPopupComponent("")},refreshTableData:function(){this.$root.$emit("Popup:refreshPageTableData")},notifySuccess:function(t){this.$message({showClose:!0,message:t,type:"success"})},errorMessage:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"已刪除";this.$message({showClose:!0,message:t,type:"error"})},onSubmit:function(){var t=this;this.$validator.validate().then((function(e){if(e){t.isLoading=!0;var a=t.deepCopy(t.form);a.image=t.cacheImg,t.isLoading=!0,t.$http.post("".concat(C).concat(w),{data:a}).then((function(e){t.refreshTableData(),t.isLoading=!1,t.setPopupComponent(""),t.notifySuccess("新增成功")}))}else t.errorMessage("資料不完整")}))}})},D=S,$=(a("b5e7"),Object(b["a"])(D,n,o,!1,null,null,null));e["a"]=$.exports},"8b30":function(t,e,a){"use strict";a("7271")},"8fba":function(t,e,a){},"8fbc":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"side-popup-content"},[t._t("default")],2)},o=[],r={components:{},props:{},data:function(){return{}},computed:{},watch:{},created:function(){},mounted:function(){},methods:{}},i=r,s=(a("e6d0"),a("2877")),c=Object(s["a"])(i,n,o,!1,null,null,null);e["a"]=c.exports},9161:function(t,e,a){"use strict";a("e226")},9798:function(t,e,a){},"9b99":function(t,e,a){"use strict";a("37a6")},a125:function(t,e,a){"use strict";a("9798")},a388:function(t,e,a){},a69f:function(t,e,a){},af68:function(t,e,a){},b575:function(t,e,a){},b5e7:function(t,e,a){"use strict";a("a388")},c0dd:function(t,e,a){},c2b7:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"side-popup-footer"},[t._t("default")],2)},o=[],r=(a("8e6e"),a("ac6a"),a("456d"),a("bd86")),i=a("2f62");function s(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function c(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?s(Object(a),!0).forEach((function(e){Object(r["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):s(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var l={components:{},props:{},data:function(){return{}},computed:{},watch:{},created:function(){},mounted:function(){},methods:c(c({},Object(i["b"])(["setPopupComponent"])),{},{closeSidePopup:function(){this.setPopupComponent("")}})},u=l,p=(a("e1d4"),a("2877")),d=Object(p["a"])(u,n,o,!1,null,null,null);e["a"]=d.exports},d49f:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"text-area"},[a("el-input",{attrs:{readonly:t.readonly,type:"textarea",rows:t.rowHeight},model:{value:t.fullValue,callback:function(e){t.fullValue=e},expression:"fullValue"}})],1)},o=[],r=(a("c5f6"),{components:{},props:{value:{type:String,default:function(){return""}},readonly:{type:Boolean,default:function(){return!1}},rowHeight:{type:Number,default:function(){return 2}}},data:function(){return{}},computed:{fullValue:{get:function(){return this.value},set:function(t){this.$emit("input",t)}}},watch:{},created:function(){},mounted:function(){},methods:{}}),i=r,s=(a("6619"),a("2877")),c=Object(s["a"])(i,n,o,!1,null,null,null);e["a"]=c.exports},d788:function(t,e,a){},d9c6:function(t,e,a){"use strict";a("a69f")},e01c:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"select",attrs:{"data-css-style":t.cssStyle}},[a("el-select",{attrs:{placeholder:t.placeholder},on:{change:t.selectChange},model:{value:t.fullValue,callback:function(e){t.fullValue=e},expression:"fullValue"}},t._l(t.selectOptions,(function(e,n){return a("el-option",{key:e[t.valueKey],attrs:{"value-key":t.valueKey,label:e[t.label],value:e[t.valueKey]}})})),1)],1)},o=[],r=(a("c5f6"),{props:{value:{type:[String,Number],default:function(){return""}},valueKey:{type:String,default:"value"},label:{type:String,default:"name"},selectOptions:{type:Array,default:function(){return[]}},cssStyle:{type:String,default:function(){return"default"}},placeholder:{type:String,default:function(){return"請選擇"}}},data:function(){return{}},computed:{fullValue:{get:function(){return this.value},set:function(t){this.$emit("input",t)}}},watch:{},created:function(){},mounted:function(){},methods:{selectChange:function(t){this.$emit("Select:selectChange",t)}}}),i=r,s=(a("7115"),a("2877")),c=Object(s["a"])(i,n,o,!1,null,null,null);e["a"]=c.exports},e13e:function(t,e,a){},e1d4:function(t,e,a){"use strict";a("2655")},e226:function(t,e,a){},e433:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("input",{staticClass:"input",attrs:{placeholder:t.placeholder,type:t.type},domProps:{value:t.value},on:{input:function(e){return t.$emit("input",e.target.value)}}})},o=[],r=(a("c5f6"),{components:{},props:{value:{type:[String,Number],default:""},placeholder:{type:String,default:""},name:{type:String,default:""},type:{type:String,default:"text"}},data:function(){return{}},computed:{},watch:{},created:function(){},mounted:function(){},methods:{}}),i=r,s=(a("a125"),a("2877")),c=Object(s["a"])(i,n,o,!1,null,null,null);e["a"]=c.exports},e51e:function(t,e,a){"use strict";a("af68")},e6d0:function(t,e,a){"use strict";a("e13e")},f4fb:function(t,e,a){"use strict";a("d788")},f66b:function(t,e,a){},fab6:function(t,e,a){"use strict";a("4bb6")},fac7:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"side-popup-header"},[a("div",{staticClass:"side-popup-header__name"},[t._t("default")],2),a("div",{staticClass:"side-popup-header__cross"},[a("i",{staticClass:"el-icon-close",on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.setPopupComponent("")}}})])])},o=[],r=(a("8e6e"),a("ac6a"),a("456d"),a("bd86")),i=a("2f62");function s(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function c(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?s(Object(a),!0).forEach((function(e){Object(r["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):s(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var l={components:{},props:{},data:function(){return{}},computed:{},watch:{},created:function(){},mounted:function(){},methods:c({},Object(i["b"])(["setPopupComponent"]))},u=l,p=(a("4d84"),a("2877")),d=Object(p["a"])(u,n,o,!1,null,null,null);e["a"]=d.exports}});
//# sourceMappingURL=app.f3825200.js.map